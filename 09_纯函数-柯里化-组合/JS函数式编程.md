# JS 函数式编程（编程范式。一种规范一种方式）

与之对应就是 面向对象编程

## ！！ 理解 JavaScript 纯函数

React 中不管函数组件还是类组件，应该像纯函数一样。
**纯函数**非常重要。

---

函数式编程中有一个非常重要的概念：纯函数。JavaScript 符合函数式编程的范式，所以有纯函数的概念；

- 在 react 开发中穿黑色农户是被多次提及的
- 比如 react 中组件就被要求像是一个纯函数（为什么是像，因为还有 class 组件），redux 中有一个 reducer 的概念，也是要求必须是一个纯函数；
- 所以掌握纯函数对于理解很多框架的设计是非常有帮助的。

---

vue3 setup 也是一个函数。编写很多其他逻辑。 vue3 和 react 非常像。
编写很多其他的逻辑 => 更加接近原生开发 => 函数的概念 => hook

## 纯函数的维基百科定义

一个函数**符合以下条件**

1. 函数在**相同的输入值时**，需**产生相同的输出**

   ```js
   var name = "abc";
   function foo() {
     return name;
   }
   foo(123);
   name = "why";
   foo(123);
   // 相同输入产生不同输出
   ```

2. 函数的 **输出 和输入值以外的其他隐藏信息或状态无关**，也和 **由 I/O 设备产生的外部输出** 无关；
   ```js
   var name = "";
   function foo(a, b) {
     // 只跟函数内部执行 和 输入的 arguments 有关
     return a + b;
   }
   // IO 设备 输入输出，比如键盘的输入输出
   ```
3. 该函数 **不能有语义上可观察的函数*副作用***，诸如 **“触发事件”， 使输入设备输出，或更改输出值以外物件的内容**等。

   ```js
   var name = "abc";
   function foo(a, b) {
     // 不能触发其他事件
     // 浏览器发生了一次点击
     // 打印 console.log(); 输入输出
     // 你这能做我要求你做的设备

     // ! 会改变外面的数据
     name = "why";
   }
   ```

### 简单总结

1. 确定的输入，一定会产生确定的输出；
2. 函数的执行过程中，不能产生副作用；

## 副作用的理解

- 副作用（side effect）其实本身是医学的一个概念，比如我们经常说吃什么药本来是为了治病，可能会产生一些其他的副作用
- 在计算机科学中，也引入了副作用的概念，表示**在执行一个函数**时，除了**返回函数值**之外，还对**调用函数产生了附加的影响**，比如**修改了全局变量，修改参数或者改变外部的存储**

### 纯函数在执行的过程中就不能产生这样的副作用：

- 副作用往往是产生**bug 的 “温床”。**

## 纯函数案例

- slice 截取数组时不会对原数组进行任何操作，而是生成一个新的数组；
- splice 截取数组，会返回一个新的数组，也会对原数组进行修改；
- slice 就是纯函数，不会修改传入的参数；

## 纯函数优势

为什么纯函数在函数式编程中非常重要呢？

1. 因为你可以**安心的编写**和**安心的使用**
2. **在写的时候**保证了函数的纯度，只是**单纯实现自己的业务逻辑**即可，**不需要关心传入的内容**是如何获得的或者**依赖其他的外部变量**是否已经发生了修改；
3. **在用的时候**，你确定**你输入内容不会被任意篡改**，并且**自己确定的输入**，一定有**确定的输出**

在 React 中要求我们无论是函数还是 class 声明一个组件，这个组件都必须像纯函数一样，保护他们的 props 不被修改：
React 非常灵活，但它也有一个严格的规则：

- 所有 React 组件都必须像纯函数一样保护它们的 props 不被更改。

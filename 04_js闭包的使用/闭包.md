# 闭包

## JS 中函数是一等公民（JAVA 中对象是一等公民，作为参数、返回值）

- 在 JavaScript 中，函数是非常重要的，并且是一等公民：
  - 那么就意味着函数的使用是非常灵活的；
  - 函数可以作为另外一个函数的参数，也可以作为另外一个函数的返回值来使用；
- 自己编写高阶函数
- 使用内置的高阶函数

## 闭包的定义

从两个角度，计算机科学和 JavaScript 中来看。

1. 在计算机科学照中
   - 闭包 Closure，又称**词法闭包**或**函数闭包**
   - 是在支持 **头等函数的** 编程语言中，*实现词法绑定*的一种技术；
   - 闭包在实现上是一个结构体（js 中是对象 ），它存储了一个函数和一个关联的环境（相当于一个符号查找表）
   - ！（这句是核心）闭包跟函数最大的区别在于，当捕捉闭包的时候，它的**自由变量**会在捕捉时被确定，这样即使脱离了捕捉时的上下文，它也能照常运行；
2. 在 JS 中
   - JS 中大量的设计来源于 Scheme 的。
     MDN 中对 JS 闭包的解释。
   - 一个函数和对其周围状态（**词法语境**）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是闭包（closure）
   - 也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域；
   - 在 JS 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。

111
